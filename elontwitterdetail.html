<!DOCTYPE html>
<head>
    <!-- CSS -->
    <link rel="stylesheet" href="stylesheet.css">
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js" charset="utf-8"></script>

    <script>
        let tweets = [];
        let currentTweetIndex = 0;

        // Fetch tweets uit endpoint
        function fetchTweetsFromBackend() {
        fetch("http://127.0.0.1:5000/tweet//get_all")
            .then(response => response.json())
            .then(data => {
            if (data.res && Array.isArray(data.res)) {
                tweets = data.res;
                displayTweet(currentTweetIndex); // Toon de eerste tweet
            } else {
                console.error("Probleem met tweet structuur", data);
            }
            })
            .catch(error => {
            console.error("Error met het fetchen van de tweets:", error);
            });
        }

        // Functie om de tweet te tonen in HTML
        function displayTweet(index) {
        if (tweets.length === 0) {
            document.getElementById("tweet-container").innerHTML = "Geen tweets beschikbaar.";
            return;
        }

        const tweet = tweets[index];
        const tweetContainer = document.getElementById("tweet-container");
        tweetContainer.innerHTML = `
            <div class="tweet-text">${tweet.tweet}</div>
        `;
        }

        // Functie om door de tweets te navigeren
        function changeTweet(direction) {
        currentTweetIndex += direction;
        if (currentTweetIndex < 0) {
            currentTweetIndex = tweets.length - 1;
        } else if (currentTweetIndex >= tweets.length) {
            currentTweetIndex = 0;
        }
        displayTweet(currentTweetIndex);
        }

        // Fetch tweets bij laden van de pagina
        window.onload = fetchTweetsFromBackend;
    </script>
    
</head>

<body>
    <h1>Tweet Detail Display</h1>

    <div id="tweet-container" class="tweet-container"></div>
    <br>
    <br>
    <div class="navigation-buttons">
        <button id="prev-tweet" onclick="changeTweet(-1)">Vorige Tweet</button>
        <button id="next-tweet" onclick="changeTweet(1)">Volgende Tweet</button>
    </div>    

</body>

</html>
