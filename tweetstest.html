<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elon Twitter Analyse</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <!-- Importeer het Source Sans Pro lettertype -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Source Sans Pro', Arial, sans-serif;
        }

        h1 {
            color: #0077B5; /* LinkedIn blauw */
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Elon Twitter Analyse</h1>
    <div id="plotly-table"></div>

    <script>
        // Haal data op van de backend
        fetch("http://127.0.0.1:5000/ELONTWITTERANALYSE")
            .then(response => {
                if (!response.ok) {
                    throw new Error("Netwerkresponse was niet ok: " + response.statusText);
                }
                return response.json();
            })
            .then(data => {
                // Verwerk de data voor de Plotly-tabel
                const dates = data.map(row => row.date);
                const times = data.map(row => row.time);
                const tweets = data.map(row => row.tweet);

                // Maak een Plotly-tabel
                const tableData = [{
                    type: 'table',
                    header: {
                        values: ["<b>Datum</b>", "<b>Tijd</b>", "<b>Tweet</b>"],
                        align: 'center',
                        fill: { color: '#0077B5' }, // LinkedIn blauw
                        font: { color: 'white', size: 16, family: 'Source Sans Pro' }
                    },
                    cells: {
                        values: [dates, times, tweets],
                        align: 'left',
                        fill: { color: '#F3F6F8' }, // Lichtgrijs
                        font: { color: 'black', size: 14, family: 'Source Sans Pro' }
                    }
                }];

                // Render de tabel
                Plotly.newPlot('plotly-table', tableData);
            })
            .catch(error => {
                console.error("Fout bij ophalen data:", error);
                document.getElementById('plotly-table').innerHTML = "<p>Er is een fout opgetreden bij het ophalen van de data.</p>";
            });
    </script>
</body>
</html>
